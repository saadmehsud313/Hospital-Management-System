<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Hospital_Management_System.Views.ReceptionistView"
             xmlns:viewmodels="clr-namespace:Hospital_Management_System.ViewModels"
             xmlns:models="clr-namespace:Hospital_Management_System.Models"
             x:DataType="viewmodels:ReceptionistViewModel"
             Title="Profile"
             Background="#F5F7FA"
             Shell.NavBarIsVisible="False">
    <Grid RowDefinitions="Auto,*" ColumnDefinitions="*" Background="#F5F7FA">
        <!-- Header with Sidebar (Collapsible on small devices) -->
        <Grid Grid.Row="0" Grid.Column="0" 
              RowDefinitions="Auto" 
              ColumnDefinitions="Auto,*"
              ColumnSpacing="0"
              x:Name="HeaderGrid">

            <!-- Sidebar Navigation - Hidden on small screens -->
            <VerticalStackLayout Grid.Row="0" Grid.Column="0" 
                                 Margin="0" 
                                 Background="White" 
                                 Padding="15"
                                 Spacing="10"
                                 WidthRequest="200"
                                 IsVisible="True"
                                 x:Name="SidebarPanel">

                <Border StrokeShape="RoundRectangle 50" 
                        WidthRequest="100" 
                        HeightRequest="100" 
                        HorizontalOptions="Center"
                        Margin="0,10,0,10"
                        Stroke="#4A90E2"
                        StrokeThickness="3"
                        Background="#E8F4FF">
                    <Label Text="ðŸ¤µðŸ¾"
                           TextColor="#4A90E2"
                           FontSize="60"
                           FontAttributes="Bold"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>
                </Border>

                <Label Text="{Binding StaffName}"
                       TextColor="#2C3E50"
                       HorizontalOptions="Center" 
                       FontSize="14" 
                       FontAttributes="Bold"
                       Margin="0,5,0,3"
                       LineBreakMode="WordWrap"/>

                <Label Text="{Binding StaffRole}" 
                       HorizontalOptions="Center" 
                       FontSize="11"
                       TextColor="#7F8C8D"
                       Margin="0,0,0,3"
                       LineBreakMode="WordWrap"/>

                <Border StrokeShape="RoundRectangle 12"
                        Background="#E8F4FF"
                        Padding="8,4"
                        HorizontalOptions="Center"
                        Margin="0,3,0,10">
                    <Label Text="{Binding StaffDepartment}" 
                           HorizontalOptions="Center" 
                           FontSize="10"
                           TextColor="#4A90E2"
                           FontAttributes="Bold"
                           LineBreakMode="WordWrap"/>
                </Border>

                <BoxView Color="#E1E8ED" HeightRequest="1" Margin="0,5,0,10"/>

                <Button Text="Profile" Command="{Binding ToggleProfileViewCommand}" 
                        BackgroundColor="Transparent" 
                        ImageSource="profile_btn_logo.png"
                        Margin="0,5">
                    <Button.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ToggleProfileViewCommand}"/>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="TextColor" Value="#2C3E50"/>
                            <Setter Property="FontSize" Value="13"/>
                            <Setter Property="Padding" Value="10,8"/>
                            <Setter Property="CornerRadius" Value="8"/>
                            <Setter Property="BorderColor" Value="Transparent"/>
                        </Style>
                    </Button.Style>
                </Button>

                <Button Text="Password" Command="{Binding ToggleInfoViewCommand}" 
                        BackgroundColor="Transparent" 
                        ImageSource="change_password_logo.png"
                        Margin="0,3">
                    <Button.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ToggleInfoViewCommand}"/>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="TextColor" Value="#2C3E50"/>
                            <Setter Property="FontSize" Value="13"/>
                            <Setter Property="Padding" Value="10,8"/>
                            <Setter Property="CornerRadius" Value="8"/>
                            <Setter Property="BorderColor" Value="Transparent"/>
                        </Style>
                    </Button.Style>
                </Button>

                <BoxView Color="#E1E8ED" HeightRequest="1" Margin="0,10,0,5"/>

                <Button Text="Logout" Command="{Binding LogoutClickedCommand}" 
                        BackgroundColor="Transparent" 
                        ImageSource="logout_logo.png"
                        Margin="0,5">
                    <Button.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding LogoutClickedCommand}"/>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="TextColor" Value="Black"/>
                            <Setter Property="FontSize" Value="13"/>
                            <Setter Property="Padding" Value="10,8"/>
                            <Setter Property="CornerRadius" Value="8"/>
                            <Setter Property="BorderColor" Value="Transparent"/>
                        </Style>
                    </Button.Style>
                </Button>
            </VerticalStackLayout>

            <!-- Spacer for layout -->
            <BoxView Grid.Row="0" Grid.Column="1" Background="Transparent"/>
        </Grid>

        <!-- Main Content Area -->
        <ScrollView Grid.Row="1" Grid.Column="0">
            <VerticalStackLayout Padding="10" Spacing="10">

                <!-- Personal Information View -->
                <ContentView IsVisible="{Binding ProfileViewStatus}" 
                             x:Name="PersonalInfoPage">
                    <Border StrokeShape="RoundRectangle 15" 
                            Background="White" 
                            Padding="15"
                            StrokeThickness="0"
                            Margin="5">
                        <VerticalStackLayout Spacing="12">
                            <HorizontalStackLayout Spacing="8" Margin="0,0,0,15">
                                <BoxView Color="#4A90E2" WidthRequest="4" HeightRequest="28" CornerRadius="2"/>
                                <Label Text="Personal Information" 
                                       FontSize="22"
                                       TextColor="#2C3E50" 
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       LineBreakMode="WordWrap"/>
                            </HorizontalStackLayout>

                            <!-- Staff ID Field -->
                            <VerticalStackLayout Margin="0,0,0,10">
                                <Label Text="Staff ID" 
                                       FontSize="11" 
                                       TextColor="#7F8C8D"
                                       FontAttributes="Bold"
                                       Margin="0,0,0,6"/>
                                <Border StrokeShape="RoundRectangle 10"
                                        Stroke="#E1E8ED"
                                        Background="#F8FAFB"
                                        Padding="12,10"
                                        HorizontalOptions="FillAndExpand">
                                    <Label Text="{Binding StaffId}"
                                           TextColor="#2C3E50"
                                           FontSize="14"
                                           LineBreakMode="WordWrap"/>
                                </Border>
                            </VerticalStackLayout>

                            <!-- Name Fields Grid -->
                            <Grid RowDefinitions="Auto,Auto" 
                                  ColumnDefinitions="*,*"
                                  ColumnSpacing="10"
                                  RowSpacing="10"
                                  Margin="0,0,0,10">

                                <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                                    <Label Text="First Name" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding StaffFirstName}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                                    <Label Text="Last Name" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding StaffLastName}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <!-- Email Field -->
                            <VerticalStackLayout Margin="0,0,0,10">
                                <Label Text="Email Address" 
                                       FontSize="11" 
                                       TextColor="#7F8C8D"
                                       FontAttributes="Bold"
                                       Margin="0,0,0,6"/>
                                <Border StrokeShape="RoundRectangle 10"
                                        Stroke="#E1E8ED"
                                        Background="#F8FAFB"
                                        Padding="12,10"
                                        HorizontalOptions="FillAndExpand">
                                    <Label Text="{Binding StaffEmail}"
                                           TextColor="#2C3E50"
                                           FontSize="14"
                                           LineBreakMode="WordWrap"/>
                                </Border>
                            </VerticalStackLayout>

                            <!-- Phone and Hire Date Grid -->
                            <Grid RowDefinitions="Auto,Auto" 
                                  ColumnDefinitions="*,*"
                                  ColumnSpacing="10"
                                  RowSpacing="10"
                                  Margin="0,0,0,10">

                                <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                                    <Label Text="Phone Number" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding StaffPhoneNumber}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                                    <Label Text="Hire Date" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding StaffHireDate}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <!-- Active Status -->
                            <VerticalStackLayout Margin="0,0,0,0">
                                <Label Text="Active Status" 
                                       FontSize="11" 
                                       TextColor="#7F8C8D"
                                       FontAttributes="Bold"
                                       Margin="0,0,0,6"/>
                                <Border StrokeShape="RoundRectangle 10"
                                        Stroke="#27AE60"
                                        Background="#E8F8F5"
                                        Padding="12,10"
                                        HorizontalOptions="Start">
                                    <Label Text="{Binding StaffStatus}"
                                           TextColor="#27AE60"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           LineBreakMode="WordWrap"/>
                                </Border>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </Border>
                </ContentView>

                <!-- Login Information View -->
                <ContentView IsVisible="{Binding InfoViewState}" 
                             x:Name="LoginInfoPage">
                    <Border StrokeShape="RoundRectangle 15" 
                            Background="White" 
                            Padding="15"
                            StrokeThickness="0"
                            Margin="5">
                        <VerticalStackLayout Spacing="12">
                            <HorizontalStackLayout Spacing="8" Margin="0,0,0,15">
                                <BoxView Color="#4A90E2" WidthRequest="4" HeightRequest="28" CornerRadius="2"/>
                                <Label Text="Login Information" 
                                       FontSize="22"
                                       TextColor="#2C3E50" 
                                       FontAttributes="Bold"
                                       VerticalOptions="Center"
                                       LineBreakMode="WordWrap"/>
                            </HorizontalStackLayout>

                            <!-- User ID Field -->
                            <VerticalStackLayout Margin="0,0,0,10">
                                <Label Text="User ID" 
                                       FontSize="11" 
                                       TextColor="#7F8C8D"
                                       FontAttributes="Bold"
                                       Margin="0,0,0,6"/>
                                <Border StrokeShape="RoundRectangle 10"
                                        Stroke="#E1E8ED"
                                        Background="#F8FAFB"
                                        Padding="12,10"
                                        HorizontalOptions="FillAndExpand">
                                    <Label Text="{Binding UserId}"
                                           TextColor="#2C3E50"
                                           FontSize="14"
                                           LineBreakMode="WordWrap"/>
                                </Border>
                            </VerticalStackLayout>

                            <!-- Username and Password Grid -->
                            <Grid RowDefinitions="Auto,Auto" 
                                  ColumnDefinitions="*,*"
                                  ColumnSpacing="10"
                                  RowSpacing="10"
                                  Margin="0,0,0,10">

                                <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                                    <Label Text="User Name" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding UserName}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                                    <Label Text="Password" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Label Text="{Binding UserPassword}"
                                               TextColor="#2C3E50"
                                               FontSize="14"
                                               LineBreakMode="WordWrap"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <!-- New Password and Confirm Password Grid -->
                            <Grid RowDefinitions="Auto,Auto" 
                                  ColumnDefinitions="*,*"
                                  ColumnSpacing="10"
                                  RowSpacing="10"
                                  Margin="0,0,0,10">

                                <VerticalStackLayout Grid.Row="0" Grid.Column="0">
                                    <Label Text="New Password" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Entry Text="{Binding NewPassword}"
                                               TextColor="#2C3E50"
                                               Placeholder="New Password"
                                               FontSize="14"/>
                                    </Border>
                                </VerticalStackLayout>

                                <VerticalStackLayout Grid.Row="0" Grid.Column="1">
                                    <Label Text="Confirm Password" 
                                           FontSize="11" 
                                           TextColor="#7F8C8D"
                                           FontAttributes="Bold"
                                           Margin="0,0,0,6"/>
                                    <Border StrokeShape="RoundRectangle 10"
                                            Stroke="#E1E8ED"
                                            Background="#F8FAFB"
                                            Padding="12,10">
                                        <Entry Text="{Binding ConfirmPassword}"
                                               Placeholder="Confirm Password"
                                               TextColor="#2C3E50"
                                               FontSize="14"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <!-- Email Field -->
                            <VerticalStackLayout Margin="0,0,0,15">
                                <Label Text="Email Address" 
                                       FontSize="11" 
                                       TextColor="#7F8C8D"
                                       FontAttributes="Bold"
                                       Margin="0,0,0,6"/>
                                <Border StrokeShape="RoundRectangle 10"
                                        Stroke="#E1E8ED"
                                        Background="#F8FAFB"
                                        Padding="12,10"
                                        HorizontalOptions="FillAndExpand">
                                    <Label Text="{Binding StaffEmail}"
                                           TextColor="#2C3E50"
                                           FontSize="14"
                                           LineBreakMode="WordWrap"/>
                                </Border>
                            </VerticalStackLayout>

                            <!-- Action Buttons Grid -->
                            <Grid RowDefinitions="Auto" 
                                  ColumnDefinitions="*,Auto,Auto"
                                  ColumnSpacing="10">

                                <BoxView Grid.Row="0" Grid.Column="0" Background="Transparent"/>

                                <Button Grid.Row="0" Grid.Column="1" 
                                        Text="Discard Changes" 
                                        Background="White">
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="TextColor" Value="#7F8C8D"/>
                                            <Setter Property="FontSize" Value="12"/>
                                            <Setter Property="Padding" Value="15,10"/>
                                            <Setter Property="CornerRadius" Value="8"/>
                                            <Setter Property="BorderWidth" Value="2"/>
                                            <Setter Property="BorderColor" Value="#E1E8ED"/>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button Grid.Row="0" Grid.Column="2" 
                                        Text="Change Password" 
                                        Command="{Binding UpdateProfileCommand}">
                                    <Button.GestureRecognizers>
                                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                    </Button.GestureRecognizers>
                                    <Button.Style>
                                        <Style TargetType="Button">
                                            <Setter Property="TextColor" Value="White"/>
                                            <Setter Property="FontSize" Value="12"/>
                                            <Setter Property="FontAttributes" Value="Bold"/>
                                            <Setter Property="Padding" Value="15,10"/>
                                            <Setter Property="CornerRadius" Value="8"/>
                                            <Setter Property="BorderWidth" Value="0"/>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>
                </ContentView>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>