<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Hospital_Management_System.Views.NursePage"
             xmlns:viewmodels="clr-namespace:Hospital_Management_System.ViewModels"
             xmlns:models="clr-namespace:Hospital_Management_System.Models"
             x:DataType="viewmodels:NurseViewModel"
             Title="Nurse Dashboard"
             Background="#F5F7FA"
             Shell.NavBarIsVisible="False">

    <ContentPage.Resources>
        <Style x:Key="DataDisplayBorder" TargetType="Border">
            <Setter Property="Stroke" Value="#EAECEE"/>
            <Setter Property="BackgroundColor" Value="#F8F9F9"/>
            <Setter Property="Padding" Value="15, 10"/>
            <Setter Property="HeightRequest" Value="45"/>
            <Setter Property="StrokeShape">
                <Setter.Value>
                    <RoundRectangle CornerRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="InputBorder" TargetType="Border">
            <Setter Property="Stroke" Value="#EAECEE"/>
            <Setter Property="BackgroundColor" Value="#FFFFFF"/>
            <Setter Property="Padding" Value="10, 0"/>
            <Setter Property="HeightRequest" Value="45"/>
            <Setter Property="StrokeShape">
                <Setter.Value>
                    <RoundRectangle CornerRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="TabButton" TargetType="Button">
            <Setter Property="TextColor" Value="White"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="10"/>
        </Style>

        <Style x:Key="SidebarButton" TargetType="Button">
            <Setter Property="TextColor" Value="#FFFFFF"/>
            <Setter Property="BackgroundColor" Value="#34495E"/>
            <Setter Property="WidthRequest" Value="180"/>
            <Setter Property="HeightRequest" Value="50"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="0,15,0,0"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <HorizontalStackLayout VerticalOptions="Start" Background="#F5F7FA" HeightRequest="750">

            <!-- Sidebar Navigation -->
            <VerticalStackLayout Margin="0" WidthRequest="250" Background="#34495E" Padding="20, 30">

                <Label Text="{Binding StaffName}"
                       TextColor="White"
                       HorizontalOptions="Center" 
                       FontSize="20" 
                       FontAttributes="Bold"
                       Margin="0, 0, 0, 5"/>

                <Label Text="{Binding StaffDepartment}" 
                       HorizontalOptions="Center" 
                       FontSize="16"
                       TextColor="#BDC3C7"
                       Margin="0,0,0,5"/>

                <Label Text="{Binding StaffRole}" 
                       HorizontalOptions="Center" 
                       FontSize="14"
                       TextColor="#BDC3C7"
                       Margin="0,0,0,30"/>

                <BoxView HeightRequest="1" Color="#5D6D7E" Margin="0, 10, 0, 30"/>

                <Button Text="Profile" 
                        Command="{Binding ShowProfileCommand}"
                        Style="{StaticResource SidebarButton}">
                    <Button.GestureRecognizers>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                </Button>

                <Button Text="Room Assignments" 
                        Command="{Binding ShowRoomAssignmentsCommand}"
                        Style="{StaticResource SidebarButton}">
                    <Button.GestureRecognizers>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                </Button>

                <Button Text="Update Credentials" 
                        Command="{Binding ShowInfoCommand}"
                        Style="{StaticResource SidebarButton}">
                    <Button.GestureRecognizers>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                </Button>

                <BoxView HeightRequest="1" Color="#5D6D7E" Margin="0, 30, 0, 10"/>

                <Button Text="Logout" 
                        Command="{Binding LogoutCommand}" 
                        BackgroundColor="#E74C3C" 
                        TextColor="White" 
                        Margin="0, 60, 0, 0" 
                        WidthRequest="180" 
                        HeightRequest="50" 
                        CornerRadius="10"
                        FontSize="16">
                    <Button.GestureRecognizers>
                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                    </Button.GestureRecognizers>
                </Button>

            </VerticalStackLayout>

            <!-- Main Content Area -->
            <VerticalStackLayout WidthRequest="850" Background="White" Margin="30,30,20,30" Padding="30, 20" Spacing="20">
                <VerticalStackLayout.Shadow>
                    <Shadow Brush="Gray" Offset="5,5" Radius="10" Opacity="0.3"/>
                </VerticalStackLayout.Shadow>

                <!-- Profile View -->
                <ContentView IsVisible="{Binding ShowProfileView}">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ‘¨â€âš•ï¸ Personal Information" 
                               FontSize="24"  
                               TextColor="#34495E" 
                               FontAttributes="Bold"
                               Margin="0,0,0,10"/>

                        <VerticalStackLayout>
                            <Label Text="ID" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource DataDisplayBorder}" WidthRequest="400" HorizontalOptions="Start">
                                <Label Text="{Binding StaffId}" TextColor="#2C3E50" FontSize="16"/>
                            </Border>
                        </VerticalStackLayout>

                        <HorizontalStackLayout Spacing="30">
                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="First Name" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="{Binding StaffFirstName}" TextColor="#2C3E50" FontSize="16"/>
                                </Border>
                            </VerticalStackLayout>

                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Last Name" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="{Binding StaffLastName}" TextColor="#2C3E50" FontSize="16"/>
                                </Border>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <VerticalStackLayout>
                            <Label Text="Email Address" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource DataDisplayBorder}" WidthRequest="830" HorizontalOptions="Start">
                                <Label Text="{Binding StaffEmail}" TextColor="#2C3E50" FontSize="16"/>
                            </Border>
                        </VerticalStackLayout>

                        <HorizontalStackLayout Spacing="30">
                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Phone Number" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="{Binding StaffPhoneNumber}" TextColor="#2C3E50" FontSize="16"/>
                                </Border>
                            </VerticalStackLayout>
                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Hire Date" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="{Binding StaffHireDate, StringFormat='{0:dd MMM yyyy}'}" TextColor="#2C3E50" FontSize="16"/>
                                </Border>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <VerticalStackLayout>
                            <Label Text="Active Status" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource DataDisplayBorder}" WidthRequest="400" HorizontalOptions="Start">
                                <Label Text="{Binding StaffStatus}" TextColor="#27AE60" FontSize="16" FontAttributes="Bold"/>
                            </Border>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </ContentView>

                <!-- Room Assignments View -->
                <ContentView IsVisible="{Binding ShowRoomAssignmentsView}">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="ðŸ¥ Room Assignments" 
                               FontSize="24"  
                               TextColor="#34495E" 
                               FontAttributes="Bold"
                               Margin="0,0,0,10"/>

                        <!-- Tab Buttons -->
                        <HorizontalStackLayout Margin="0" Spacing="15" HorizontalOptions="Center">
                            <Button Text="TODAY" 
                                    Command="{Binding SelectTodayTabCommand}" 
                                    BackgroundColor="{Binding TodayTabColor}"
                                    Style="{StaticResource TabButton}"
                                    WidthRequest="300">
                                <Button.GestureRecognizers>
                                    <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                </Button.GestureRecognizers>
                            </Button>

                            <Button Text="HISTORY" 
                                    Command="{Binding SelectHistoryTabCommand}" 
                                    BackgroundColor="{Binding HistoryTabColor}"
                                    Style="{StaticResource TabButton}"
                                    WidthRequest="300">
                                <Button.GestureRecognizers>
                                    <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                </Button.GestureRecognizers>
                            </Button>
                        </HorizontalStackLayout>

                        <!-- Loading Indicator -->
                        <ActivityIndicator IsVisible="{Binding IsLoading}" 
                                           IsRunning="{Binding IsLoading}"
                                           HorizontalOptions="Center"
                                           Margin="0,20"
                                           Color="#3498DB"/>

                        <!-- Today Tab Content -->
                        <VerticalStackLayout IsVisible="{Binding ShowTodayTab}" Spacing="10">
                            <Label Text="TODAY'S ROOM ASSIGNMENTS" 
                                   FontSize="18" 
                                   TextColor="#2C3E50"
                                   FontAttributes="Bold"
                                   Margin="0,10,0,0"/>

                            <Label Text="{Binding TodayCount, StringFormat='Total: {0} rooms'}" 
                                   FontSize="14" 
                                   TextColor="#7F8C8D"
                                   Margin="0,0,0,10"/>

                            <CollectionView ItemsSource="{Binding TodayRoomAssignments}" 
                                            HeightRequest="350"
                                            SelectionMode="Single"
                                            EmptyView="No room assignments for today.">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate x:DataType="models:RoomAssignment">
                                        <Border Padding="20" 
                                                Margin="0,0,0,15" 
                                                BackgroundColor="#FFFFFF" 
                                                Stroke="#D5DBE3"  
                                                StrokeThickness="1"
                                                MinimumHeightRequest="140">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="12"/>
                                            </Border.StrokeShape>
                                            <Border.Shadow>
                                                <Shadow Brush="#EAECEE" Offset="2,2" Radius="5" Opacity="0.5"/>
                                            </Border.Shadow>

                                            <VerticalStackLayout Spacing="12">
                                                <!-- Top Row: Room Info -->
                                                <HorizontalStackLayout Spacing="20">
                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Room Number" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding RoomNumber}" 
                                                               FontSize="16" 
                                                               FontAttributes="Bold"
                                                               TextColor="#4A90E2"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="150">
                                                        <Label Text="Ward" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding Ward}" 
                                                               FontSize="16" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="150">
                                                        <Label Text="Room Type" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding RoomType}" 
                                                               FontSize="16" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>
                                                </HorizontalStackLayout>

                                                <BoxView HeightRequest="1" Color="#EAECEE"/>

                                                <!-- Bottom Row: Patient Info -->
                                                <HorizontalStackLayout Spacing="20">
                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Patient Name" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding PatientName}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="100">
                                                        <Label Text="Patient ID" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding PatientID}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="100">
                                                        <Label Text="Admission ID" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding AdmissionID}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Admit Reason" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding AdmitReason}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"
                                                               LineBreakMode="TailTruncation"/>
                                                    </VerticalStackLayout>
                                                </HorizontalStackLayout>
                                            </VerticalStackLayout>
                                        </Border>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>

                        <!-- History Tab Content -->
                        <VerticalStackLayout IsVisible="{Binding ShowHistoryTab}" Spacing="10">
                            <Label Text="ROOM ASSIGNMENT HISTORY" 
                                   FontSize="18" 
                                   TextColor="#2C3E50"
                                   FontAttributes="Bold"
                                   Margin="0,10,0,0"/>

                            <!-- Date Picker Section -->
                            <HorizontalStackLayout Spacing="20" Margin="0,20,0,10">
                                <VerticalStackLayout>
                                    <Label Text="Select Date" FontSize="12" TextColor="#7F8C8D"/>
                                    <Border Style="{StaticResource InputBorder}" WidthRequest="200">
                                        <DatePicker Date="{Binding SelectedHistoryDate}" 
                                                    TextColor="#2C3E50"
                                                    FontSize="16"/>
                                    </Border>
                                </VerticalStackLayout>

                                <Button Text="Load History" 
                                        Command="{Binding LoadHistoryByDateCommand}"
                                        BackgroundColor="#4A90E2"
                                        TextColor="White"
                                        WidthRequest="150"
                                        HeightRequest="45"
                                        CornerRadius="8"
                                        Margin="0,20,0,0"
                                        FontAttributes="Bold">
                                    <Button.GestureRecognizers>
                                        <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                    </Button.GestureRecognizers>
                                </Button>
                            </HorizontalStackLayout>

                            <Label Text="{Binding HistoryCount, StringFormat='Total: {0} rooms'}" 
                                   FontSize="14" 
                                   TextColor="#7F8C8D"
                                   Margin="0,0,0,10"/>

                            <!-- History CollectionView -->
                            <CollectionView ItemsSource="{Binding HistoryRoomAssignments}" 
                                            HeightRequest="300"
                                            SelectionMode="Single"
                                            EmptyView="Select a date and click Load History to view past assignments.">
                                <CollectionView.ItemTemplate>
                                    <DataTemplate x:DataType="models:RoomAssignment">
                                        <Border Padding="20" 
                                                Margin="0,0,0,15" 
                                                BackgroundColor="#FFFFFF" 
                                                Stroke="#D5DBE3"  
                                                StrokeThickness="1"
                                                MinimumHeightRequest="140">
                                            <Border.StrokeShape>
                                                <RoundRectangle CornerRadius="12"/>
                                            </Border.StrokeShape>
                                            <Border.Shadow>
                                                <Shadow Brush="#EAECEE" Offset="2,2" Radius="5" Opacity="0.5"/>
                                            </Border.Shadow>

                                            <VerticalStackLayout Spacing="12">
                                                <HorizontalStackLayout Spacing="20">
                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Room Number" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding RoomNumber}" 
                                                               FontSize="16" 
                                                               FontAttributes="Bold"
                                                               TextColor="#4A90E2"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="150">
                                                        <Label Text="Ward" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding Ward}" 
                                                               FontSize="16" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="150">
                                                        <Label Text="Room Type" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding RoomType}" 
                                                               FontSize="16" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>
                                                </HorizontalStackLayout>

                                                <BoxView HeightRequest="1" Color="#EAECEE"/>

                                                <HorizontalStackLayout Spacing="20">
                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Patient Name" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding PatientName}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="100">
                                                        <Label Text="Patient ID" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding PatientID}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="100">
                                                        <Label Text="Admission ID" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding AdmissionID}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"/>
                                                    </VerticalStackLayout>

                                                    <VerticalStackLayout Spacing="5" WidthRequest="200">
                                                        <Label Text="Admit Reason" FontSize="11" TextColor="#7F8C8D" FontAttributes="Bold"/>
                                                        <Label Text="{Binding AdmitReason}" 
                                                               FontSize="14" 
                                                               TextColor="#34495E"
                                                               LineBreakMode="TailTruncation"/>
                                                    </VerticalStackLayout>
                                                </HorizontalStackLayout>
                                            </VerticalStackLayout>
                                        </Border>
                                    </DataTemplate>
                                </CollectionView.ItemTemplate>
                            </CollectionView>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </ContentView>

                <!-- Update Credentials View (Like Doctor View) -->
                <ContentView IsVisible="{Binding ShowInfoView}">
                    <VerticalStackLayout Spacing="20">
                        <Label Text="ðŸ”‘ Update Profile Credentials" 
                               FontSize="24"  
                               TextColor="#34495E" 
                               FontAttributes="Bold"
                               Margin="0,0,0,10"/>

                        <VerticalStackLayout>
                            <Label Text="User ID (Read-Only)" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource DataDisplayBorder}" WidthRequest="400" HorizontalOptions="Start">
                                <Label Text="{Binding StaffId}" FontSize="16" TextColor="#2C3E50"/>
                            </Border>
                        </VerticalStackLayout>

                        <HorizontalStackLayout Spacing="30">
                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Current Username (View Only)" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="{Binding StaffName}" FontSize="16" TextColor="#2C3E50"/>
                                </Border>
                            </VerticalStackLayout>

                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Current Password (View Only)" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource DataDisplayBorder}">
                                    <Label Text="â—â—â—â—â—â—â—â—" FontSize="16" TextColor="#2C3E50"/>
                                </Border>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <VerticalStackLayout>
                            <Label Text="New Username" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource InputBorder}" WidthRequest="400" HorizontalOptions="Start">
                                <Entry Placeholder="Enter new username" 
                                       PlaceholderColor="#7F8C8D"
                                       Text="{Binding NewUsername, Mode=TwoWay}"
                                       TextColor="#34495E"
                                       FontSize="16"
                                       BackgroundColor="Transparent"
                                       ClearButtonVisibility="WhileEditing"/>
                            </Border>
                        </VerticalStackLayout>

                        <VerticalStackLayout>
                            <Label Text="Email Address (Read-Only)" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource DataDisplayBorder}" WidthRequest="830" HorizontalOptions="Start">
                                <Label Text="{Binding StaffEmail}" FontSize="16" TextColor="#2C3E50"/>
                            </Border>
                        </VerticalStackLayout>

                        <VerticalStackLayout>
                            <Label Text="New Username" FontSize="12" TextColor="#7F8C8D"/>
                            <Border Style="{StaticResource InputBorder}" WidthRequest="400" HorizontalOptions="Start">
                                <Entry Placeholder="Enter new username" 
                                       PlaceholderColor="#7F8C8D"
                                       Text="{Binding NewUsername, Mode=TwoWay}"
                                       TextColor="#34495E"
                                       FontSize="16"
                                       BackgroundColor="Transparent"
                                       ClearButtonVisibility="WhileEditing"/>
                            </Border>
                        </VerticalStackLayout>

                        <HorizontalStackLayout Spacing="30">
                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="New Password" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource InputBorder}">
                                    <Entry Placeholder="Enter new password" 
                                           PlaceholderColor="#7F8C8D"
                                           Text="{Binding NewPassword, Mode=TwoWay}"
                                           TextColor="#34495E"
                                           FontSize="16"
                                           BackgroundColor="Transparent"
                                           IsPassword="True"
                                           ClearButtonVisibility="WhileEditing"/>
                                </Border>
                            </VerticalStackLayout>

                            <VerticalStackLayout WidthRequest="400">
                                <Label Text="Confirm Password" FontSize="12" TextColor="#7F8C8D"/>
                                <Border Style="{StaticResource InputBorder}">
                                    <Entry Placeholder="Confirm new password" 
                                           PlaceholderColor="#7F8C8D"
                                           Text="{Binding ConfirmPassword, Mode=TwoWay}"
                                           TextColor="#34495E"
                                           FontSize="16"
                                           BackgroundColor="Transparent"
                                           IsPassword="True"
                                           ClearButtonVisibility="WhileEditing"/>
                                </Border>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <HorizontalStackLayout HorizontalOptions="End" Margin="0, 30, 0, 20" Spacing="20">
                            <Button Text="Cancel" 
                                    BackgroundColor="White"
                                    TextColor="#7F8C8D"
                                    WidthRequest="150"
                                    HeightRequest="50"
                                    CornerRadius="10"
                                    FontAttributes="Bold"
                                    BorderWidth="2"
                                    BorderColor="#E1E8ED">
                                <Button.GestureRecognizers>
                                    <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                </Button.GestureRecognizers>
                            </Button>

                            <Button Text="Save Changes" 
                                    Command="{Binding UpdateProfileCommand}"
                                    BackgroundColor="#27AE60"
                                    TextColor="White"
                                    WidthRequest="250"
                                    HeightRequest="50"
                                    CornerRadius="10"
                                    FontAttributes="Bold">
                                <Button.GestureRecognizers>
                                    <PointerGestureRecognizer PointerEntered="OnPointerEntered" PointerExited="OnPointerExited"/>
                                </Button.GestureRecognizers>
                            </Button>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </ContentView>
            </VerticalStackLayout>
        </HorizontalStackLayout>
    </ScrollView>
</ContentPage>